!function(t){var e={};function r(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(s,o,function(e){return t[e]}.bind(null,o));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e){const r={makeRow(t=0){const e=new Array(9);return e.fill(t),e},makeMatrix(t=0){return Array.from({length:9},()=>this.makeRow(t))},shuffle(t){const e=t.length-2;for(let r=0;r<=e;r++){const e=r+Math.floor(Math.random()*(t.length-r));[t[r],t[e]]=[t[e],t[r]]}return t},checkFillable(t,e,r,o){const n=t[r],a=this.makeRow().map((e,r)=>t[r][o]),{boxIndex:i}=s.convertToBoxIndex(r,o),l=s.getBoxCells(t,i);for(let t=0;t<9;t++)if(n[t]===e||a[t]===e||l[t]===e)return!1;return!0}},s={getBoxCells(t,e){const r=3*Math.floor(e/3),s=e%3*3,o=[];for(let e=0;e<9;e++){const n=r+Math.floor(e/3),a=s+e%3;o.push(t[n][a])}return o},convertToBoxIndex:(t,e)=>({boxIndex:3*Math.floor(t/3)+Math.floor(e/3),cellIndex:t%3*3+e%3}),convertFromBoxIndex:(t,e)=>({rowIndex:3*Math.floor(t/3)+Math.floor(e/3),colIndex:t%3*3+e%3})};t.exports=class{static get matrix(){return r}static get box(){return s}}},function(t,e,r){const s=r(2),o=r(6),n=new s($("#container"));n.build(),n.layout();const a=new o($("#popupNumbers"));n.bindPopup(a),$("#check").on("click",t=>{n.check()}),$("#reset").on("click",t=>{n.reset()}),$("#clear").on("click",t=>{n.clear()}),$("#rebuild").on("click",t=>{n.rebuild()})},function(t,e,r){r(0);const s=r(3),o=r(5);t.exports=class{constructor(t){this._$container=t}build(){const t=new s;t.make();const e=t.puzzleMatrix,r=["row_g_top","row_g_middle","row_g_bottom"],o=["col_g_left","col_g_middle","col_g_right"],n=e.map(t=>t.map((t,e)=>$("<span>").addClass(o[e%3]).addClass(t?"fixed":"empty").text(t))).map((t,e)=>$("<div>").addClass("row").addClass(r[e%3]).append(t));this._$container.append(n)}layout(){const t=$("span:first",this._$container).width();$("span",this._$container).height(t).css({"line-height":`${t}px`,"font-size":t<32?`${t/2}px`:""})}check(){const t=this._$container.children().map((t,e)=>$(e).children().map((t,e)=>parseInt($(e).text()))||0).toArray().map(t=>t.toArray()),e=new o(t);if(e.check())return!0;const r=e.matrixMarks;this._$container.children().each((t,e)=>{$(e).children().each((e,s)=>{const o=$(s);o.is(".fixed")||r[t][e]?o.removeClass("error"):$(s).addClass("error")})})}reset(){this._$container.find("span:not(.fixed)").removeClass("error mark1 mark2").addClass("empty").text(0)}clear(){this._$container.find("span.error").removeClass("error")}rebuild(){this._$container.empty(),this.build(),this.layout()}bindPopup(t){this._$container.on("click","span:not(.fixed)",e=>{const r=$(e.target);t.popup(r)})}}},function(t,e,r){const s=r(4);t.exports=class{constructor(){const t=new s;t.generate(),this.solutionMatrix=t.matrix,console.log(this.solutionMatrix)}make(t=5){this.puzzleMatrix=this.solutionMatrix.map(e=>e.map(e=>9*Math.random()<t?0:e))}}},function(t,e,r){const s=r(0);t.exports=class{generate(){for(;!this.internalgenerate();)console.warn("try again")}internalgenerate(){this.matrix=s.matrix.makeMatrix(),this.orders=s.matrix.makeMatrix().map(t=>t.map((t,e)=>e)).map(t=>s.matrix.shuffle(t));for(let t=1;t<=9;t++)if(!this.fillNumber(t))return!1;return!0}fillNumber(t){return this.fillRow(t,0)}fillRow(t,e){if(e>8)return!0;const r=this.matrix[e],o=this.orders[e];for(let n=0;n<9;n++){const a=o[n];if(!r[a]&&s.matrix.checkFillable(this.matrix,t,e,a)){if(r[a]=t,this.fillRow(t,e+1))return!0;r[a]=0}}return!1}}},function(t,e,r){function s(t){const e=t.length,r=new Array(e);r.fill(!0);for(let s=0;s<e-1;s++){if(!r[s])continue;const o=t[s];if(o)for(let n=s+1;n<e;n++)o===t[n]&&(r[s]=r[n]=!1);else r[s]=!1}return r}const o=r(0);t.exports=class{constructor(t){this._matrix=t,this._matrixMarks=o.matrix.makeMatrix(!0)}get matrixMarks(){return this._matrixMarks}get isSuccess(){return this._success}check(){return this.checkRows(),this.checkCols(),this.checkBoxes(),this._success=this._matrixMarks.every(t=>t.every(t=>t)),this._success}checkRows(){for(let t=0;t<9;t++){const e=s(this._matrix[t]);for(let r=0;r<e.length;r++)e[r]||(this._matrixMarks[t][r]=!1)}}checkCols(){for(let t=0;t<9;t++){const e=[];for(let r=0;r<9;r++)e[r]=this._matrix[r][t];const r=s(e);for(let e=0;e<r.length;e++)r[e]||(this._matrixMarks[e][t]=!1)}}checkBoxes(){for(let t=0;t<9;t++){const e=s(o.box.getBoxCells(this._matrix,t));for(let r=0;r<9;r++)if(!e[r]){const{rowIndex:e,colIndex:s}=o.box.convertFromBoxIndex(t,r);this._matrixMarks[e][s]=!1}}}}},function(t,e){t.exports=class{constructor(t){this._$panel=t.hide().removeClass("hidden"),this._$panel.on("click","span",t=>{const e=this._$targetCell,r=$(t.target);r.hasClass("mark1")?e.hasClass("mark1")?e.removeClass("mark1"):(e.hasClass("mark2")&&e.removeClass("mark2"),e.addClass("mark1")):r.hasClass("mark2")?e.hasClass("mark2")?e.removeClass("mark2"):(e.hasClass("mark1")&&e.removeClass("mark1"),e.addClass("mark2")):r.hasClass("empty")?(e.hasClass("mark1")&&e.removeClass("mark1"),e.hasClass("mark2")&&e.removeClass("mark2"),e.text(0).addClass("empty")):e.removeClass("empty").text(r.text()),this.hide()})}popup(t){this._$targetCell=t;const{left:e,top:r}=t.position();this._$panel.css({left:`${e}px`,top:`${r}px`}).show()}hide(){this._$panel.hide()}}}]);
//# sourceMappingURL=index.js.map